!function(t){"use strict";function i(){}function e(t,i){return i.indexOf(t)>-1}function s(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(t){return"[object Object]"===Object.prototype.toString.call(t)}function a(t,i){return t.className.match(new RegExp("(\\s|^)("+i+")(\\s|$)"))}function h(t,i){a(t,i)||(t.className+=" "+i)}function r(t,i){a(t,i)&&(t.className=t.className.replace(RegExp("(\\s|^)("+i+")(\\s|$)"),"$3"))}function o(t){return/<\/?[^>]*>/.test(t)?!1:/^(?:(https|http|ftp|rtsp|mms):)?(\/\/)?(\w+:{0,1}\w*@)?([^\?#:\/]+\.[a-z]+|\d+\.\d+\.\d+\.\d+)?(:[0-9]+)?((?:\.?\/)?([^\?#]*)?(\?[^#]+)?(#.+)?)?$/.test(t)}function l(t){return Array.prototype.slice.apply(t,Array.prototype.slice.call(arguments,1))}var d=function(){var t=l(arguments,0,3);if(!t.length)throw new Error("Parameters required!");var i=n(t.slice(-1)[0])?t.pop():{};switch(t.length){case 2:i.data=i.data||t[1];case 1:i.dom=i.dom||t[0]}if(!i.dom)throw new Error("Container can not be empty!");if(!i.data||!i.data.length)throw new Error("Data must be an array and must have more than one element!");this._opts=i,i=null,t=null,this._setting(),this.fire("initialize"),this._renderWrapper(),this._initPlugins(),this._bindHandler(),this.fire("initialized"),this._autoPlay()};d.VERSION="2.1.2",d.EVENTS=["initialize","initialized","pluginInitialize","pluginInitialized","slide","slideStart","slideEnd","slideChange","slideChanged","slideRestore","slideRestored","loadData","reset","destroy"],d.EASING=[["linear","ease","ease-in","ease-out","ease-in-out"],/cubic-bezier\(([^\d]*(\d+.?\d*)[^\,]*\,?){4}\)/],d.FIX_PAGE_TAGS=["SELECT","INPUT","TEXTAREA","BUTTON","LABEL"],d.NODE_TYPE={unknown:"unknown",empty:"empty",pic:"pic",dom:"dom",html:"html",node:"node",element:"element"},d.TRANSITION_END_EVENT=function(){var t=document.createElement("fakeElement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var e in i)if(i.hasOwnProperty(e)&&void 0!==t.style[e])return i[e];return null}(),d.extend=function(){var t,i,e=arguments;switch(e.length){case 0:return;case 1:t=d.prototype,i=e[0];break;case 2:t=e[0],i=e[1]}for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},d.plugins={},d.regPlugin=function(t,i){d.plugins[t]=d.plugins[t]||i},d._animateFuncs={normal:function(){function t(t,i,e,s,n){t.style.webkitTransform="translateZ(0) translate"+i+"("+(n+e*(s-1))+"px)"}return t.effect="transform",t}()};var c=d.prototype;c.extend=d.extend,c._setting=function(){this._plugins=d.plugins,this._animateFuncs=d._animateFuncs,this._holding=!1,this._locking=!1,this._intermediateScene=null,this._transitionEndHandler=null,this._LSN={autoPlay:null,resize:null,transitionEnd:null},this.currentEl=null,this._EventHandle={};var n=this._opts;this.wrap=n.dom,this.data=n.data,this.isVertical=!!n.isVertical,this.isOverspread=!!n.isOverspread,this.duration=n.duration||2e3,this.initIndex=n.initIndex>0&&n.initIndex<=n.data.length-1?n.initIndex:0,this.fixPage=null==n.fixPage?!0:!!n.fixPage,this.fillSeam=!!n.fillSeam,this.slideIndex=this.slideIndex||this.initIndex||0,this.axis=this.isVertical?"Y":"X",this.reverseAxis="Y"===this.axis?"X":"Y",this.width="number"==typeof n.width?n.width:this.wrap.offsetWidth,this.height="number"==typeof n.height?n.height:this.wrap.offsetHeight,this.ratio=this.height/this.width,this.scale=this.isVertical?this.height:this.width,this.offset=this.offset||{X:0,Y:0},this.isTouchable=null==n.isTouchable?!0:!!n.isTouchable,this.isLooping=n.isLooping&&this.data.length>1?!0:!1,this.delay=n.delay||0,this.isAutoplay=n.isAutoplay&&this.data.length>1?!0:!1,this.animateType=n.animateType in this._animateFuncs?n.animateType:"normal",this._animateFunc=this._animateFuncs[this.animateType],this._animateReverse=function(){var t=[];for(var i in this._animateFuncs)this._animateFuncs.hasOwnProperty(i)&&this._animateFuncs[i].reverse&&t.push(i);return t}.bind(this)(),this.isVertical&&"card"===this.animateType&&(this.isOverspread=!0),this.log=n.isDebug?function(){t.console.log.apply(t.console,arguments)}:i,this._damping=function(){var t=this.scale>>1,i=t>>1,e=i>>2;return function(s){var n,a=Math.abs(s);return n=t>a?a>>1:t+i>a?i+(a-t>>2):i+e+(a-t-i>>3),s>0?n:-n}}.bind(this)(),this.animateTime=null!=n.animateTime&&n.animateTime>-1?n.animateTime:300,this.animateEasing=e(n.animateEasing,d.EASING[0])||d.EASING[1].test(n.animateEasing)?n.animateEasing:"ease",this.deviceEvents=function(){var i=!!("ontouchstart"in t||t.DocumentTouch&&document instanceof t.DocumentTouch);return{hasTouch:i,startEvt:i?"touchstart":"mousedown",moveEvt:i?"touchmove":"mousemove",endEvt:i?"touchend":"mouseup",cancelEvt:i?"touchcancel":"mouseout",resizeEvt:"onorientationchange"in t?"orientationchange":"resize"}}(),this.fingerRecognitionRange=n.fingerRecognitionRange>-1?parseInt(n.fingerRecognitionRange):10,this.onMoving=!1,this.onSliding=!1,this.events={},d.EVENTS.forEach(function(t){var i=n["on"+t.toLowerCase()];"function"==typeof i&&this.on(t,i,1)}.bind(this)),this.pluginConfig=function(){var t={};return s(n.plugins)&&n.plugins.forEach(function(i){s(i)?t[i[0]]=i.slice(1):"string"==typeof i&&(t[i]=[])}),t}()},c._initPlugins=function(){var t=this.pluginConfig,i=this._plugins;for(var e in t)t.hasOwnProperty(e)&&i.hasOwnProperty(e)&&(this.log("[INIT PLUGIN]:",e,i[e]),i[e]&&"function"==typeof i[e]&&typeof i[e].apply&&i[e].apply(this,t[e]));this.fire("pluginInitialized")},c._itemType=function(t){if(isNaN(t)||(t=this.data[t]),t.hasOwnProperty("type"))return t.type;var i,e=t.content,s=d.NODE_TYPE;return i=null==e?s.empty:Boolean(e.nodeName)&&Boolean(e.nodeType)?s.node:"string"==typeof e?o(e)?s.pic:s.html:s.unknown,t.type=i,i},c._renderItem=function(t,i){var e,s=this,n=this.data.length,a=function(){var i=' src="'+e.content+'"';i+=e.height/e.width>s.ratio?' height="100%"':' width="100%"',s.isOverspread&&(t.style.cssText+="background-image:url("+e.content+");background-repeat:no-repeat;background-position:50% 50%;background-size:cover",i+=' style="display:block;opacity:0;height:100%;width:100%;"'),t.innerHTML="<img"+i+" />"};if(t.innerHTML="",t.style.background="",this.isLooping||null!=this.data[i]){i=(n+i)%n,e=this.data[i];var h=this._itemType(e),r=d.NODE_TYPE;switch(this.log("[RENDER]:",h,i,e),t.className="islider-"+h,h){case r.pic:if(2===e.load)a();else{var o=new Image;o.src=e.content,o.onload=function(){e.height=o.height,e.width=o.width,a(),e.load=2}}break;case r.dom:case r.html:t.innerHTML=e.content;break;case r.node:case r.element:if(11===e.content.nodeType){var l=document.createElement("div");l.appendChild(e.content),e.content=l}t.appendChild(e.content)}}},c._renderIntermediateScene=function(){null!=this._intermediateScene&&(this._renderItem.apply(this,this._intermediateScene),this._intermediateScene=null)},c._changedStyles=function(){var t=["islider-prev","islider-active","islider-next"];this.els.forEach(function(i,e){r(i,t.join("|")),h(i,t[e]),this.fillSeam&&this.originScale(i)}.bind(this))},c._renderWrapper=function(){var i;this.outer?(i=this.outer,i.innerHTML=""):i=document.createElement("ul"),i.className="islider-outer",this.els=[];for(var e=0;3>e;e++){var s=document.createElement("li");this.els.push(s),this._animateFunc(s,this.axis,this.scale,e,0),this.fixPage||(s.style.overflow="auto"),!this.isVertical||"rotate"!==this.animateType&&"flip"!==this.animateType?this._renderItem(s,e-1+this.slideIndex):this._renderItem(s,1-e+this.slideIndex),i.appendChild(s)}this._changedStyles(),this.fillSeam&&this.els.forEach(function(t,i){h(t,"islider-sliding"+(1===i?"-focus":""))}),t.setTimeout(function(){this._preloadImg(this.slideIndex)}.bind(this),200),this.outer||(this.outer=i,this.wrap.appendChild(i)),this.currentEl=this.els[1],this.fire("renderComplete",this.slideIndex,this.currentEl,this)},c._preloadImg=function(t){if(this.data.length>3){var i=this.data,e=i.length,s=this,n=function(t){var e=i[t];if("pic"===s._itemType(e)&&!e.load){var n=new Image;n.src=e.content,n.onload=function(){e.width=n.width,e.height=n.height,e.load=2},e.load=1}};n((t+2)%e),n((t-2+e)%e)}},c._watchTransitionEnd=function(i,e){this._unWatchTransitionEnd();var s=function(){this._unWatchTransitionEnd(),"slideChanged"===e&&this._changedStyles(),this.fire.call(this,e,this.slideIndex,this.currentEl,this),this._renderIntermediateScene(),this.play(),this.onSliding=!1,this.direction=null}.bind(this);d.TRANSITION_END_EVENT?(this.currentEl.addEventListener(d.TRANSITION_END_EVENT,s),this._transitionEndHandler={el:this.currentEl,handler:s}):this._LSN.transitionEnd=t.setTimeout(s,i)},c._unWatchTransitionEnd=function(){this._LSN.transitionEnd&&t.clearTimeout(this._LSN.transitionEnd),null!==this._transitionEndHandler&&(this._transitionEndHandler.el.removeEventListener(d.TRANSITION_END_EVENT,this._transitionEndHandler.handler),this._transitionEndHandler=null)},c._bindHandler=function(){var i=this.outer,e=this.deviceEvents;this.isTouchable&&(e.hasTouch||(i.style.cursor="pointer",i.ondragstart=function(t){return t?!1:!0}),i.addEventListener(e.startEvt,this),i.addEventListener(e.moveEvt,this),i.addEventListener(e.endEvt,this),!e.hasTouch&&i.addEventListener("mouseout",this)),t.addEventListener(e.resizeEvt,this),t.addEventListener("focus",this,!1),t.addEventListener("blur",this,!1)},c.handleEvent=function(t){var i=this.deviceEvents;switch(t.type){case"mousedown":if(0!==t.button)break;case"touchstart":this.startHandler(t);break;case i.moveEvt:this.moveHandler(t);break;case i.endEvt:case i.cancelEvt:this.endHandler(t);break;case i.resizeEvt:this.resizeHandler();break;case"focus":this.play();break;case"blur":this.pause()}},c.startHandler=function(t){if(this.fixPage&&d.FIX_PAGE_TAGS.indexOf(t.target.tagName)<0&&t.preventDefault(),!this._holding&&!this._locking){var i=this.deviceEvents;this.onMoving=!0,this.pause(),this.log("[EVENT]: start"),this.fire("slideStart",t,this),this.startTime=(new Date).getTime(),this.startX=i.hasTouch?t.targetTouches[0].pageX:t.pageX,this.startY=i.hasTouch?t.targetTouches[0].pageY:t.pageY}},c.moveHandler=function(t){if(this.onMoving){this.log("[EVENT]: moving");var i=this.deviceEvents,e=this.data.length,s=this.axis,n=this.reverseAxis,a={};t.hasOwnProperty("offsetRatio")?(a[s]=t.offsetRatio*this.scale,a[n]=0):(a.X=i.hasTouch?t.targetTouches[0].pageX-this.startX:t.pageX-this.startX,a.Y=i.hasTouch?t.targetTouches[0].pageY-this.startY:t.pageY-this.startY),this.offset=a,t.offsetRatio=a[s]/this.scale,Math.abs(a[s])-Math.abs(a[n])>10&&(t.preventDefault(),this._unWatchTransitionEnd(),this.isLooping||(a[s]>0&&0===this.slideIndex||a[s]<0&&this.slideIndex===e-1)&&(a[s]=this._damping(a[s])),this.els.forEach(function(t,i){t.style.visibility="visible",t.style.webkitTransition="none",this._animateFunc(t,s,this.scale,i,a[s],a[s]),this.fillSeam&&this.seamScale(t)}.bind(this)),this.fire("slide",t,this))}},c.endHandler=function(i){function e(s){if(null!=s)if("A"===s.tagName){if(s.href)return"_blank"===s.getAttribute("target")?t.open(s.href):t.location.href=s.href,i.preventDefault(),!1}else{if("LI"===s.tagName&&s.className.search(/^islider\-/)>-1)return!1;e(s.parentNode)}}if(this.onMoving){this.log("[EVENT]: end"),this.onMoving=!1;var s=this.offset,n=this.axis,a=this.scale/2,h=(new Date).getTime(),r=this.fingerRecognitionRange;a=h-this.startTime>300?a:14;var o=Math.abs(s[n]),l=Math.abs(s[this.reverseAxis]);this.fire("slideEnd",i,this),s[n]>=a&&o>l?this.slideTo(this.slideIndex-1):s[n]<-a&&o>l?this.slideTo(this.slideIndex+1):Math.abs(this.offset[n])>=r&&this.slideTo(this.slideIndex),Math.abs(this.offset[n])<r&&this.fixPage&&i.target&&e(i.target),this.offset.X=this.offset.Y=0}},c.resizeHandler=function(){var i,e,s=this._LSN.resize,n=+new Date;this.deviceEvents.hasTouch?(s&&t.clearInterval(s),s=t.setInterval(function(){this.height!==this.wrap.offsetHeight||this.width!==this.wrap.offsetWidth?(s&&t.clearInterval(s),s=t.setInterval(function(){i===this.wrap.offsetWidth&&e===this.wrap.offsetHeight?(s&&t.clearInterval(s),this.reset(),this.log("[EVENT]: resize")):(i=this.wrap.offsetWidth,e=this.wrap.offsetHeight)}.bind(this),12)):+new Date-n>=1e3&&s&&t.clearInterval(s)}.bind(this),12)):(s&&t.clearTimeout(s),s=t.setTimeout(function(){(this.height!==this.wrap.offsetHeight||this.width!==this.wrap.offsetWidth)&&(s&&t.clearInterval(s),this.reset(),this.log("[EVENT]: resize"))}.bind(this),200))},c.slideTo=function(t,i){if(this.isAutoplay&&this.pause(),!this._locking){this.unhold(),this.onSliding=!0;var s,n=this.animateTime,a=this.animateType,o=this._animateFunc,l=this.data,d=this.els,c=this.axis,u=t,f=t-this.slideIndex,p=this.offset,g=0;"object"==typeof i&&(i.animateTime>-1&&(n=i.animateTime),"string"==typeof i.animateType&&i.animateType in this._animateFuncs&&(a=i.animateType,o=this._animateFuncs[a])),0!==p[c]&&(g=Math.abs(p[c])/this.scale*n),Math.abs(f)>1&&this._renderItem(f>0?this.els[2]:this.els[0],u),this._preloadImg(u),l[u]?this.slideIndex=u:this.isLooping?this.slideIndex=f>0?0:l.length-1:f=0,this.log("[SLIDE TO]: "+this.slideIndex);var m,v,E;0===f?s="slideRestore":((this.isVertical&&e(a,this._animateReverse))^f>0?(d.push(d.shift()),m=d[2],v=d[0],E=1):(d.unshift(d.pop()),m=d[0],v=d[2],E=-1),this.currentEl=d[1],1===Math.abs(f)?(this._renderIntermediateScene(),this._renderItem(m,u+f)):Math.abs(f)>1&&(this._renderItem(m,u+E),this._intermediateScene=[v,u-E]),m.style.webkitTransition="none",g=n-g,s="slideChange",this.fillSeam&&(d.forEach(function(t){r(t,"islider-sliding|islider-sliding-focus")}),h(this.currentEl,"islider-sliding-focus"),h(m,"islider-sliding")),this.direction=E);for(var _=0;3>_;_++)d[_]!==m&&(d[_].style.webkitTransition=(o.effect||"all")+" "+g+"ms "+this.animateEasing),o.call(this,d[_],c,this.scale,_,0,E),this.fillSeam&&this.seamScale(d[_]);this._watchTransitionEnd(g,s+"d"),this.fire(s,this.slideIndex,this.currentEl,this)}},c.slideNext=function(){this.slideTo.apply(this,[this.slideIndex+1].concat(l(arguments)))},c.slidePrev=function(){this.slideTo.apply(this,[this.slideIndex-1].concat(l(arguments)))},c.regPlugin=function(){var t=l(arguments),i=t.shift(),s=t[0];(this._plugins.hasOwnProperty(i)||"function"==typeof s)&&("function"==typeof s&&(this._plugins[i]=s,t.shift()),e(i,this._opts.plugins)||(this._opts.plugins.push(t.length?[].concat([i],t):i),"function"==typeof this._plugins[i]&&this._plugins[i].apply(this,t)))},c.bind=c.delegate=function(i,e,s){function n(i){for(var n=t.event?t.event:i,a=n.target,h=document.querySelectorAll(e),r=0;r<h.length;r++)if(a===h[r]){s.call(a);break}}this.wrap.addEventListener(i,n,!1);var a=i+";"+e;this._EventHandle.hasOwnProperty(a)?(this._EventHandle[a][0].push(s),this._EventHandle[a][1].push(n)):this._EventHandle[a]=[[s],[n]]},c.unbind=c.unDelegate=function(t,i,e){var s=t+";"+i;if(this._EventHandle.hasOwnProperty(s)){var n=this._EventHandle[s][0].indexOf(e);if(n>-1)return this.wrap.removeEventListener(t,this._EventHandle[s][1][n]),this._EventHandle[s][0][n]=this._EventHandle[s][1][n]=null,!0}return!1},c.destroy=function(){var i=this.outer,e=this.deviceEvents;this.fire("destroy"),this.isTouchable&&(i.removeEventListener(e.startEvt,this),i.removeEventListener(e.moveEvt,this),i.removeEventListener(e.endEvt,this),!e.hasTouch&&i.removeEventListener("mouseout",this)),t.removeEventListener(e.resizeEvt,this),t.removeEventListener("focus",this),t.removeEventListener("blur",this);var s;for(s in this._EventHandle)for(var n=this._EventHandle[s][1],a=0;a<n.length;a++)"function"==typeof n[a]&&this.wrap.removeEventListener(s.substr(0,s.indexOf(";")),n[a]);this._EventHandle=null;for(s in this._LSN)this._LSN.hasOwnProperty(s)&&this._LSN[s]&&t.clearTimeout(this._LSN[s]);this._LSN=null,this.wrap.innerHTML=""},c.on=function(t,i,s){e(t,d.EVENTS)&&"function"==typeof i&&(!(t in this.events)&&(this.events[t]=[]),s?this.events[t].unshift(i):this.events[t].push(i))},c.has=function(t,i){return t in this.events?-1<this.events[t].indexOf(i):!1},c.off=function(t,i){if(t in this.events){var e=this.events[t].indexOf(i);e>-1&&delete this.events[t][e]}},c.fire=function(t){var i=l(arguments,1);t.split(/\x20+/).forEach(function(t){if(this.log("[EVENT FIRE]:",t,i),t in this.events)for(var e=this.events[t],s=0;s<e.length;s++)"function"==typeof e[s]&&e[s].apply&&e[s].apply(this,i)}.bind(this))},c.reset=function(){this.pause(),this._unWatchTransitionEnd(),this.width="number"==typeof this._opts.width?this._opts.width:this.wrap.offsetWidth,this.height="number"==typeof this._opts.height?this._opts.height:this.wrap.offsetHeight,this.ratio=this.height/this.width,this.scale=this.isVertical?this.height:this.width,this._renderWrapper(),this._autoPlay(),this.fire("reset slideRestored",this.slideIndex,this.currentEl,this)},c.loadData=function(t,i){this.pause(),this._unWatchTransitionEnd(),this.slideIndex=i||0,this.data=t,this._renderWrapper(),this._autoPlay(),this.fire("loadData slideChanged",this.slideIndex,this.currentEl,this)},c._autoPlay=function(){this.delay>0?t.setTimeout(this.play.bind(this),this.delay):this.play()},c.play=function(){this.pause(),this.isAutoplay&&(this.isLooping||this.slideIndex<this.data.length-1)&&(this._LSN.autoPlay=t.setTimeout(this.slideNext.bind(this),this.duration))},c.pause=function(){this._LSN.autoPlay&&t.clearTimeout(this._LSN.autoPlay)},c.hold=function(){this._holding=!0},c.unhold=function(){this._holding=!1,this.unlock()},c.lock=function(){this.hold(),this._locking=!0},c.unlock=function(){this._locking=!1},c.seamScale=function(t){var i=/scale([XY]?)\(([^\)]+)\)/;i.test(t.style.webkitTransform)?t.style.webkitTransform=t.style.webkitTransform.replace(i,function(t,i,e){var s={};return i?(s[i]=parseFloat(e),"scale"+this.axis+"("+(i===this.axis?1.001*s[this.axis]:1.001)+")"):(e.indexOf(",")>-1?(e=e.split(","),s.X=parseFloat(e[0]),s.Y=parseFloat(e[1])):s.Y=s.X=parseFloat(e),s[this.axis]*=1.001,"scale("+s.X+", "+s.Y+")")}.bind(this)):t.style.webkitTransform+="scale"+this.axis+"(1.001)"},c.originScale=function(t){var i=/([\x20]?scale)([XY]?)\(([^\)]+)\)/;t.style.webkitTransform=t.style.webkitTransform.replace(i,function(t,i,e,s){return t={},e?"1.001"===s?"":(t[e]=parseFloat(s),"scale"+this.axis+"("+(e===this.axis?t[this.axis]/1.001:1)+")"):(s.indexOf(",")>-1?(s=s.split(","),t.X=parseFloat(s[0]),t.Y=parseFloat(s[1])):t.Y=t.X=parseFloat(s),t[this.axis]/=1.001,"scale("+t.X+", "+t.Y+")")}.bind(this))},"function"==typeof require&&"object"==typeof module&&module&&"object"==typeof exports&&exports?module.exports=d:"function"==typeof define&&define.amd?define(function(){return d}):t.iSlider=t.iSlider||d}(this||window);